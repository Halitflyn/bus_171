<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–†–æ–∑–∫–ª–∞–¥ –º–∞—Ä—à—Ä—É—Ç–∫–∏ 171 –ë–∞—Å—ñ–≤–∫–∞ ‚Üî –õ—å–≤—ñ–≤</title>
  <!-- Favicon –∑ –µ–º–æ–¥–∑—ñ üöç -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöç</text></svg>">
  <!-- PWA Manifest –≤–±—É–¥–æ–≤–∞–Ω–∏–π —è–∫ data URI -->
  <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogItCk0L7Qt9C60LvQsNC0INC/0LDRgdC30LjRj9GC0YwgMTcxIOKGkiDQttC60LvQt9C60LAg4obQu9Cw0LLRj9GC0Ywg4obQstCw0LLQuNGPINGC0LvRg9C5INC/0YDQuNCy0L7Qu9GM0YnRgtC1IiwKICAic2hvcnRfbmFtZSI6ICLQpNC+0LfQutC70LDQtCDQv9Cw0YHQsdC40Y/RgtGMIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sLDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LndzLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiPjx0ZXh0IHk9XCIuOWVtXCIgZm9udC1zaXplPVwiOTBcIj7wn5KIPC90ZXh0Pjwvc3ZnPiIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdLAogICJzdGFydF91cmwiOiAiLi8iLAogICJkaXNwbGF5IjogImZ1bGxzY3JlZW4iLAogICJ0aGVtZV9jb2xvciI6ICIjNGNhZjUwIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjZjVmNWY1Igp9Cg==">
  <meta name="theme-color" content="#4caf50">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#121212">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      transition: background 0.3s, color 0.3s;
    }
    body.light {
      background: #f5f5f5;
      color: #222;
    }
    body.dark {
      background: #121212;
      color: #eee;
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin: 10px 0;
    }
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 10px;
      margin: 0 5px;
      background: #ccc;
      transition: 0.3s;
      color: #000;
    }
    .tab.active {
      background: #4caf50;
      color: white;
    }
    .schedule {
      display: none;
      padding: 10px;
      max-width: 1000px;
      margin: auto;
    }
    .schedule.active { display: block; }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    .card {
      background: rgba(255,255,255,0.9);
      border-radius: 12px;
      padding: 10px;
      text-align: center;
      transition: background 0.3s;
    }
    body.dark .card {
      background: rgba(30,30,30,0.9);
    }
    h3 { margin-top: 0; }
    .times span {
      display: inline-block;
      margin: 4px;
      padding: 4px 8px;
      border-radius: 6px;
      background: rgba(0,0,0,0.05);
    }
    body.dark .times span {
      background: rgba(255,255,255,0.1);
    }
    .onroute { background: #2196f3 !important; color: #fff; }
    .next { background: #ff9800 !important; color: #fff; }

    /* –¢—É–º–±–ª–µ—Ä —Ç–µ–º–∏ */
    .theme-toggle {
      position: fixed;
      top: 15px;
      right: 15px;
      width: 40px;
      height: 20px;
      border-radius: 20px;
      background: #ccc;
      cursor: pointer;
      transition: background 0.3s;
    }
    .toggle-circle {
      width: 18px;
      height: 18px;
      background: white;
      border-radius: 50%;
      position: relative;
      top: 1px;
      left: 1px;
      transition: 0.3s;
    }
    body.dark .theme-toggle { background: #666; }
    body.dark .toggle-circle { transform: translateX(20px); background: #ffeb3b; }

    footer {
      text-align: center;
      padding: 15px;
      font-size: 14px;
      opacity: 0.8;
    }

    @media (max-width: 768px) {
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body class="light">
  <div class="theme-toggle" id="themeToggle"><div class="toggle-circle"></div></div>

  <div class="tabs">
    <div class="tab" data-target="weekdays">–ë—É–¥–Ω—ñ</div>
    <div class="tab" data-target="weekend">–°—É–±–æ—Ç–∞-–ù–µ–¥—ñ–ª—è</div>
  </div>

  <!-- –ë—É–¥–Ω—ñ -->
  <div id="weekdays" class="schedule">
    <div class="grid">
      <div class="card">
        <h3>–ó—ñ –ë–∞—Å—ñ–≤–∫–∏ (1-–π)</h3>
        <div class="times">5:45 7:10 8:30 10:00 12:30 14:30 16:00 17:45 19:45</div>
      </div>
      <div class="card">
        <h3>–ó—ñ –ë–∞—Å—ñ–≤–∫–∏ (2-–π)</h3>
        <div class="times">6:30 7:50 9:15 11:00 13:45 15:15 16:45 18:45</div>
      </div>
      <div class="card">
        <h3>–ó—ñ –õ—å–≤–æ–≤–∞ (1-–π)</h3>
        <div class="times">6:30 7:50 9:15 10:45 13:15 15:15 16:45 18:30 20:30</div>
      </div>
      <div class="card">
        <h3>–ó—ñ –õ—å–≤–æ–≤–∞ (2-–π)</h3>
        <div class="times">7:10 8:30 10:00 11:45 14:30 16:00 17:30 19:30</div>
      </div>
    </div>
  </div>

  <!-- –í–∏—Ö—ñ–¥–Ω—ñ -->
  <div id="weekend" class="schedule">
    <div class="grid">
      <div class="card">
        <h3>–ó—ñ –ë–∞—Å—ñ–≤–∫–∏</h3>
        <div class="times">6:30 8:00 9:30 11:00 13:30 15:45 17:30 19:15</div>
      </div>
      <div class="card">
        <h3>–ó—ñ –õ—å–≤–æ–≤–∞</h3>
        <div class="times">7:15 8:45 10:15 11:45 14:15 16:30 18:15 20:00</div>
      </div>
    </div>
  </div>

  <footer>
    üöç –†–æ–∑–∫–ª–∞–¥ –º–∞—Ä—à—Ä—É—Ç–∫–∏ ‚Ññ171 –ë–∞—Å—ñ–≤–∫–∞ ‚Üî –õ—å–≤—ñ–≤<br>
    –°–∞–π—Ç —Å—Ç–≤–æ—Ä–∏–≤ Halitflyn ¬© 2025
  </footer>

<script>
// –ü–µ—Ä–µ–º–∏–∫–∞—á —Ç–µ–º–∏
const body = document.body;
const toggle = document.getElementById('themeToggle');
if(localStorage.getItem('theme') === 'dark') body.className = 'dark';
toggle.onclick = () => {
  body.classList.toggle('dark');
  body.classList.toggle('light');
  localStorage.setItem('theme', body.classList.contains('dark') ? 'dark' : 'light');
};

// –í–∫–ª–∞–¥–∫–∏
const tabs = document.querySelectorAll('.tab');
const schedules = document.querySelectorAll('.schedule');
tabs.forEach(tab => {
  tab.addEventListener('click', () => openTab(tab.dataset.target));
});
function openTab(id){
  tabs.forEach(t=>t.classList.remove('active'));
  schedules.forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelector(`.tab[data-target="${id}"]`).classList.add('active');
  highlightTimes(); // –û–Ω–æ–≤–∏—Ç–∏ –ø—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è –ø—Ä–∏ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—ñ
}

// –ê–≤—Ç–æ–≤–∏–±—ñ—Ä –≤–∫–ª–∞–¥–∫–∏
const todayForInit = new Date().getDay();
if(todayForInit === 6 || todayForInit === 0) openTab('weekend'); else openTab('weekdays');

// –ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è —Ä–µ–π—Å—ñ–≤ –ª–∏—à–µ –¥–ª—è —Å—å–æ–≥–æ–¥–Ω—ñ—à–Ω—å–æ–≥–æ —Ç–∏–ø—É –¥–Ω—è
function highlightTimes(){
  const activeSchedule = document.querySelector('.schedule.active');
  if (!activeSchedule) return;

  const today = new Date().getDay();
  const isTodayWeekend = (today === 0 || today === 6);
  const activeId = activeSchedule.id;
  const isMatchingDay = (activeId === 'weekdays' && !isTodayWeekend) || (activeId === 'weekend' && isTodayWeekend);

  activeSchedule.querySelectorAll('.times').forEach(div => {
    div.innerHTML = div.textContent.split(/\s+/).map(time => {
      if(!time) return '';
      if (!isMatchingDay) {
        return `<span>${time}</span>`;
      }
      const [h,m] = time.split(':').map(Number);
      const now = new Date();
      const dep = new Date(); dep.setHours(h,m,0,0);
      const diffMin = (dep - now)/60000;
      if(diffMin <= 0 && diffMin > -40) return `<span class='onroute'>${time}</span>`;
      if(diffMin > 0 && diffMin <= 30) return `<span class='next'>${time}</span>`;
      return `<span>${time}</span>`;
    }).join(' ');
  });
}
highlightTimes();
setInterval(highlightTimes, 60000);
</script>

</body>
</html>
